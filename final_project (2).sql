-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: Jul 17, 2024 at 05:18 PM
-- Server version: 10.4.32-MariaDB
-- PHP Version: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `final_project`
--

DELIMITER $$
--
-- Procedures
--
CREATE DEFINER=`root`@`localhost` PROCEDURE `GetSalesReport` ()   BEGIN
    -- Variabel untuk menyimpan hasil perhitungan
    DECLARE done INT DEFAULT FALSE;
    DECLARE category_name VARCHAR(255);
    DECLARE total_sales DECIMAL(10, 2);
    
    -- Cursor untuk iterasi melalui kategori produk
    DECLARE cur CURSOR FOR 
        SELECT DISTINCT produk_toko_kecantikan.Kategori_Barang 
        FROM produk_toko_kecantikan;

    -- Handler untuk kasus akhir dari cursor
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    -- Temp table untuk menyimpan hasil sementara
    CREATE TEMPORARY TABLE TempSalesReport (
        Kategori_Barang VARCHAR(255),
        Total_Penjualan DECIMAL(10, 2)
    );

    -- Open cursor
    OPEN cur;

    -- Loop untuk menghitung total penjualan per kategori
    read_loop: LOOP
        FETCH cur INTO category_name;
        IF done THEN
            LEAVE read_loop;
        END IF;

        -- Hitung total penjualan per kategori
        SELECT COALESCE(SUM(dp.Harga_Barang * ddt.Jumlahbarang), 0) INTO total_sales
        FROM produk_toko_kecantikan dp
        JOIN datadetailtransaksi ddt ON dp.ID = ddt.IDBarang
        WHERE dp.Kategori_Barang = category_name;

        -- Masukkan hasil ke tabel sementara
        INSERT INTO TempSalesReport (Kategori_Barang, Total_Penjualan)
        VALUES (category_name, total_sales);

    END LOOP;

    -- Close cursor
    CLOSE cur;

    -- Tampilkan laporan berdasarkan kategori
    SELECT 
        Kategori_Barang,
        Total_Penjualan,
        CASE 
            WHEN Total_Penjualan = 0 THEN 'Tidak ada penjualan untuk kategori ini.'
            WHEN Total_Penjualan > 10000 THEN 'Penjualan sangat tinggi untuk kategori ini.'
            ELSE 'Penjualan normal untuk kategori ini.'
        END AS ReportMessage
    FROM TempSalesReport;

    -- Drop tabel sementara setelah digunakan
    DROP TEMPORARY TABLE TempSalesReport;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `GetSalesSummaryByBranch` (IN `branch_id` INT, IN `start_date` DATE)   BEGIN
    DECLARE branch_exists INT;
    DECLARE total_sales DECIMAL(10, 2);

    -- Cek apakah cabang dengan ID yang diberikan ada
    SELECT COUNT(*) INTO branch_exists
    FROM datacabang
    WHERE ID = branch_id;

    IF branch_exists = 0 THEN
        -- Jika cabang tidak ditemukan, tampilkan pesan
        SELECT 'Cabang tidak ditemukan.' AS message;
    ELSE
        -- Jika cabang ditemukan, hitung total penjualan berdasarkan tanggal
        SELECT COALESCE(SUM(dp.Harga_Barang * ddt.Jumlahbarang), 0) INTO total_sales
        FROM data_transaksi dt
        JOIN datadetailtransaksi ddt ON dt.ID_transaksi = ddt.IDtransaksi
        JOIN produk_toko_kecantikan dp ON ddt.IDBarang = dp.ID
        WHERE dt.ID_pelanggan IN (
            SELECT ID
            FROM data_pelanggan
            WHERE ID_Cabang = branch_id
        )
        AND dt.Tanggal_transaksi >= start_date; -- Filter berdasarkan tanggal
        
        -- Tampilkan total penjualan
        SELECT total_sales AS TotalPenjualan;
    END IF;
END$$

--
-- Functions
--
CREATE DEFINER=`root`@`localhost` FUNCTION `get_pelanggan_summary` () RETURNS VARCHAR(255) CHARSET utf8mb4 COLLATE utf8mb4_general_ci  BEGIN
    RETURN (
        SELECT CONCAT(
            'Total Pelanggan: ', COUNT(*), 
            ', Average Age: ', AVG(Umur),
            ',Jumlah pelanggan Laki-Laki: ', COUNT(CASE WHEN  Gender = 'L' THEN 1 END),
       ',Jumlah pelanggan perempuan: ', COUNT(CASE WHEN Gender = 'P' THEN 1 END)
        )
        FROM Data_Pelanggan
    );
END$$

CREATE DEFINER=`root`@`localhost` FUNCTION `get_product_names` (`category` VARCHAR(50), `brand` VARCHAR(50)) RETURNS TEXT CHARSET utf8mb4 COLLATE utf8mb4_general_ci  BEGIN
    DECLARE product_names TEXT;

    SELECT GROUP_CONCAT(Nama_Barang SEPARATOR ', ') INTO product_names
    FROM Produk_toko_kecantikan
    WHERE Kategori_Barang = category AND Merek_Produk = brand;

    RETURN IFNULL(product_names, 'No products found');
END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `datacabang`
--

CREATE TABLE `datacabang` (
  `ID` varchar(4) NOT NULL,
  `KotaCabang` varchar(50) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `datacabang`
--

INSERT INTO `datacabang` (`ID`, `KotaCabang`) VALUES
('0001', 'Jakarta'),
('0002', 'Bandung'),
('0003', 'Surabaya'),
('0004', 'Yogyakarta'),
('0005', 'Medan');

-- --------------------------------------------------------

--
-- Table structure for table `datadetailtransaksi`
--

CREATE TABLE `datadetailtransaksi` (
  `IDTransaksi` varchar(12) DEFAULT NULL,
  `IDBarang` char(4) DEFAULT NULL,
  `JumlahBarang` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `datadetailtransaksi`
--

INSERT INTO `datadetailtransaksi` (`IDTransaksi`, `IDBarang`, `JumlahBarang`) VALUES
('20240107002', '0001', 3),
('20240107002', '0005', 2),
('20240107002', '0010', 1),
('20240108001', '0020', 4),
('20240108001', '0035', 2),
('20240108001', '0040', 1),
('20240108002', '0015', 3),
('20240108002', '0025', 2),
('20240109001', '0010', 1),
('20240109001', '0030', 2),
('20240109001', '0045', 3),
('20240109002', '0003', 2),
('20240109002', '0025', 1),
('20240110001', '0018', 4),
('20240110001', '0033', 2),
('20240110001', '0047', 1),
('20240110002', '0002', 3),
('20240110002', '0028', 2),
('20240111001', '0011', 5),
('20240111001', '0031', 3),
('20240111001', '0044', 1),
('20240111002', '0004', 4),
('20240111002', '0027', 2),
('20240112001', '0016', 1),
('20240112001', '0036', 2),
('20240112001', '0048', 3),
('20240112002', '0007', 4),
('20240112002', '0029', 2),
('20240113001', '0012', 1),
('20240113001', '0037', 2),
('20240113001', '0049', 3),
('20240113002', '0009', 2),
('20240113002', '0038', 1),
('20240114001', '0013', 5),
('20240114001', '0039', 2),
('20240114001', '0050', 1),
('20240114002', '0006', 3),
('20240114002', '0032', 2),
('20240115001', '0014', 1),
('20240115001', '0034', 2),
('20240115001', '0046', 3),
('20240115002', '0008', 2),
('20240115002', '0043', 1),
('20240116001', '0017', 5),
('20240116001', '0041', 2),
('20240116001', '0052', 1),
('20240116002', '0019', 3),
('20240116002', '0042', 2),
('20240117001', '0021', 4),
('20240117001', '0044', 2),
('20240117001', '0051', 1),
('20240117002', '0022', 3),
('20240117002', '0045', 2),
('20240118001', '0001', 3),
('20240118001', '0010', 2),
('20240118001', '0020', 1),
('20240118002', '0002', 4),
('20240118002', '0011', 2),
('20240118002', '0021', 3),
('20240119001', '0003', 1),
('20240119001', '0012', 2),
('20240119001', '0022', 4),
('20240119002', '0004', 3),
('20240119002', '0013', 2),
('20240119002', '0023', 1),
('20240120001', '0005', 4),
('20240120001', '0014', 2),
('20240120001', '0024', 3),
('20240120002', '0006', 1),
('20240120002', '0015', 2),
('20240120002', '0025', 4),
('20240121001', '0007', 3),
('20240121001', '0016', 2),
('20240121001', '0026', 1),
('20240121002', '0008', 4),
('20240121002', '0017', 2),
('20240121002', '0027', 3),
('20240122001', '0009', 1),
('20240122001', '0018', 2),
('20240122001', '0028', 4),
('20240122002', '0010', 3),
('20240122002', '0019', 2),
('20240122002', '0029', 1),
('20240123001', '0011', 4),
('20240123001', '0020', 2),
('20240123001', '0030', 3),
('20240123002', '0012', 1),
('20240123002', '0021', 2),
('20240123002', '0031', 4),
('20240124001', '0013', 3),
('20240124001', '0022', 2),
('20240124001', '0032', 1),
('20240124002', '0014', 4),
('20240124002', '0023', 2),
('20240124002', '0033', 3),
('20240125001', '0015', 1),
('20240125001', '0024', 2),
('20240125001', '0034', 4),
('20240125002', '0016', 3),
('20240125002', '0025', 2),
('20240125002', '0035', 1),
('20240126001', '0017', 4),
('20240126001', '0026', 2),
('20240126001', '0036', 3),
('20240126002', '0018', 1),
('20240126002', '0027', 2),
('20240126002', '0037', 4),
('20240127001', '0019', 3),
('20240127001', '0028', 2),
('20240127001', '0038', 1),
('20240127002', '0020', 4),
('20240127002', '0029', 2),
('20240127002', '0039', 3),
('20240128001', '0021', 1),
('20240128001', '0030', 2),
('20240128001', '0040', 4),
('20240128002', '0022', 3),
('20240128002', '0031', 2),
('20240128002', '0041', 1),
('20240129001', '0023', 4),
('20240129001', '0032', 2),
('20240129001', '0042', 3),
('20240129002', '0024', 1),
('20240129002', '0033', 2),
('20240129002', '0043', 4),
('20240130001', '0049', 4),
('20240130001', '0098', 4),
('20240130001', '0067', 5),
('20240130002', '0015', 4),
('20240130002', '0031', 4),
('20240130002', '0023', 3),
('20240130002', '0051', 3),
('20240130002', '0011', 3),
('20240131001', '0066', 2),
('20240131001', '0097', 5),
('20240131001', '0039', 1),
('20240131001', '0011', 4),
('20240131001', '0089', 2),
('20240131002', '0045', 1),
('20240131002', '0064', 4),
('20240131002', '0006', 3),
('20240201001', '0090', 1),
('20240201001', '0025', 3),
('20240201001', '0036', 2),
('20240201001', '0009', 2),
('20240201002', '0067', 5),
('20240202001', '0051', 5),
('20240202002', '0084', 5),
('20240203001', '0042', 3),
('20240203001', '0004', 1),
('20240203001', '0099', 3),
('20240203001', '0006', 5),
('20240203001', '0077', 3),
('20240203002', '0072', 5),
('20240204001', '0080', 2),
('20240204001', '0026', 1),
('20240204002', '0012', 1),
('20240204002', '0021', 1),
('20240204002', '0031', 5),
('20240204002', '0047', 3),
('20240204002', '0091', 2),
('20240205001', '0094', 3),
('20240205002', '0095', 3),
('20240205002', '0012', 1),
('20240206001', '0082', 5),
('20240206001', '0009', 2),
('20240206001', '0025', 4),
('20240206001', '0006', 5),
('20240206001', '0091', 4),
('20240206002', '0007', 5),
('20240206002', '0092', 5),
('20240206002', '0072', 2),
('20240206002', '0074', 5),
('20240207001', '0064', 4),
('20240207002', '0016', 3),
('20240208001', '0024', 2),
('20240208001', '0020', 3),
('20240208001', '0038', 3),
('20240208002', '0061', 1),
('20240208002', '0052', 2),
('20240208002', '0021', 5),
('20240209001', '0068', 3),
('20240209001', '0074', 4),
('20240209001', '0069', 1),
('20240209001', '0077', 2),
('20240209002', '0003', 3),
('20240210001', '0032', 5),
('20240210001', '0022', 4),
('20240210001', '0019', 5),
('20240210002', '0090', 4),
('20240210002', '0026', 3),
('20240210002', '0073', 1),
('20240210002', '0073', 4),
('20240210002', '0001', 5),
('20240211001', '0089', 3),
('20240211001', '0053', 3),
('20240211001', '0077', 4),
('20240211002', '0067', 2),
('20240211002', '0058', 4),
('20240211002', '0022', 3),
('20240212001', '0056', 3),
('20240212001', '0087', 5),
('20240212002', '0065', 2),
('20240213001', '0036', 1),
('20240213001', '0006', 2),
('20240213001', '0093', 4),
('20240213002', '0012', 1),
('20240213002', '0017', 1),
('20240213002', '0028', 2),
('20240214001', '0067', 1),
('20240214001', '0025', 4),
('20240214001', '0079', 1),
('20240214001', '0045', 3),
('20240214002', '0032', 3),
('20240214002', '0004', 5),
('20240215001', '0009', 2),
('20240215001', '0096', 2),
('20240215001', '0046', 4),
('20240215002', '0075', 1),
('20240215002', '0079', 2),
('20240215002', '0083', 5),
('20240215002', '0019', 3),
('20240215002', '0079', 3),
('20240216001', '0048', 4),
('20240216001', '0073', 5),
('20240216002', '0078', 5),
('20240216002', '0029', 3),
('20240216002', '0091', 1),
('20240216002', '0041', 3),
('20240217001', '0016', 2),
('20240217001', '0061', 4),
('20240217001', '0085', 5),
('20240217001', '0018', 5),
('20240217002', '0084', 1),
('20240218001', '0047', 3),
('20240218001', '0079', 1),
('20240218001', '0030', 4),
('20240218001', '0081', 2),
('20240218002', '0095', 1),
('20240218002', '0089', 1),
('20240219001', '0072', 5),
('20240219002', '0076', 5),
('20240220001', '0096', 3),
('20240220001', '0027', 5),
('20240220001', '0089', 5),
('20240220002', '0096', 1),
('20240220002', '0053', 3),
('20240220002', '0043', 1),
('20240220002', '0084', 4),
('20240221001', '0062', 2),
('20240221001', '0039', 4),
('20240221001', '0044', 5),
('20240221001', '0076', 5),
('20240221001', '0063', 4),
('20240221002', '0050', 1),
('20240221002', '0026', 5),
('20240222001', '0033', 4),
('20240222002', '0070', 3),
('20240222002', '0047', 5),
('20240223001', '0049', 2),
('20240223001', '0098', 4),
('20240223002', '0015', 4),
('20240223002', '0031', 4),
('20240224001', '0023', 3),
('20240224001', '0051', 3),
('20240224001', '0011', 3),
('20240224002', '0066', 2),
('20240224002', '0097', 5),
('20240224002', '0039', 1),
('20240225001', '0011', 4),
('20240225001', '0089', 2),
('20240225002', '0045', 1),
('20240225002', '0064', 4),
('20240226001', '0006', 3),
('20240226001', '0090', 1),
('20240226002', '0025', 3),
('20240226002', '0036', 2),
('20240227001', '0009', 2),
('20240227001', '0067', 5),
('20240227001', '0051', 5),
('20240227002', '0084', 5),
('20240227002', '0042', 3),
('20240228001', '0004', 1),
('20240228001', '0099', 3),
('20240228002', '0006', 5),
('20240228002', '0077', 3),
('20240301001', '0072', 5),
('20240301002', '0080', 2),
('20240301002', '0026', 1),
('20240302001', '0012', 1),
('20240302002', '0021', 1),
('20240302002', '0031', 5),
('20240303001', '0047', 3),
('20240303001', '0091', 2),
('20240303002', '0094', 3),
('20240303002', '0095', 3),
('20240304001', '0012', 1),
('20240304001', '0082', 5),
('20240304001', '0009', 2),
('20240304002', '0025', 4),
('20240304002', '0006', 5),
('20240305001', '0091', 4),
('20240305001', '0007', 5),
('20240305002', '0092', 5),
('20240305002', '0072', 2),
('20240306001', '0074', 5),
('20240306001', '0064', 4),
('20240306002', '0016', 3),
('20240306002', '0049', 2),
('20240307001', '0079', 2),
('20240307001', '0095', 4),
('20240307002', '0025', 3),
('20240307002', '0064', 4),
('20240308001', '0001', 5),
('20240308002', '0035', 1),
('20240309001', '0053', 2),
('20240309002', '0087', 3),
('20240310001', '0028', 4);

-- --------------------------------------------------------

--
-- Table structure for table `data_karyawan`
--

CREATE TABLE `data_karyawan` (
  `ID` char(3) NOT NULL,
  `ID_Cabang` char(4) DEFAULT NULL,
  `Umur` int(11) DEFAULT NULL,
  `Nama` varchar(255) DEFAULT NULL,
  `Gender` char(1) DEFAULT NULL,
  `Posisi` varchar(50) DEFAULT NULL,
  `Gaji` decimal(10,2) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `data_karyawan`
--

INSERT INTO `data_karyawan` (`ID`, `ID_Cabang`, `Umur`, `Nama`, `Gender`, `Posisi`, `Gaji`) VALUES
('001', '0001', 30, 'Budi Santoso', 'L', 'Marketing', 5000000.00),
('002', '0001', 28, 'Andi Saputra', 'L', 'Karyawan Gudang', 4500000.00),
('003', '0001', 27, 'Citra Dewi', 'P', 'Kasir', 4000000.00),
('004', '0001', 35, 'Dewi Ayu', 'P', 'Finance', 6000000.00),
('005', '0001', 33, 'Eka Pratiwi', 'P', 'Human Developer', 5500000.00),
('006', '0001', 32, 'Fajar Prasetyo', 'L', 'Warehouse', 5000000.00),
('007', '0002', 29, 'Gita Ramadhani', 'P', 'Marketing', 5000000.00),
('008', '0002', 26, 'Hendra Putra', 'L', 'Karyawan Gudang', 4500000.00),
('009', '0002', 30, 'Ika Ningsih', 'P', 'Kasir', 4000000.00),
('010', '0002', 34, 'Joko Susilo', 'L', 'Finance', 6000000.00),
('011', '0002', 31, 'Kartika Sari', 'P', 'Human Developer', 5500000.00),
('012', '0002', 28, 'Lina Kusuma', 'P', 'Warehouse', 5000000.00),
('013', '0003', 27, 'Mira Anggraeni', 'P', 'Marketing', 5000000.00),
('014', '0003', 32, 'Nanda Pratama', 'L', 'Karyawan Gudang', 4500000.00),
('015', '0003', 29, 'Oki Wibowo', 'L', 'Kasir', 4000000.00),
('016', '0003', 35, 'Putu Mahendra', 'L', 'Finance', 6000000.00),
('017', '0003', 31, 'Qori Andini', 'P', 'Human Developer', 5500000.00),
('018', '0003', 33, 'Rani Oktaviani', 'P', 'Warehouse', 5000000.00),
('019', '0004', 28, 'Sinta Permata', 'P', 'Marketing', 5000000.00),
('020', '0004', 30, 'Teguh Prayitno', 'L', 'Karyawan Gudang', 4500000.00),
('021', '0004', 26, 'Umi Salamah', 'P', 'Kasir', 4000000.00),
('022', '0004', 34, 'Vina Wulandari', 'P', 'Finance', 6000000.00),
('023', '0004', 29, 'Wahyu Santoso', 'L', 'Human Developer', 5500000.00),
('024', '0004', 31, 'Xena Andini', 'P', 'Warehouse', 5000000.00),
('025', '0005', 27, 'Yuda Pratama', 'L', 'Marketing', 5000000.00),
('026', '0005', 33, 'Zara Rahayu', 'P', 'Karyawan Gudang', 4500000.00),
('027', '0005', 30, 'Adi Kusuma', 'L', 'Kasir', 4000000.00),
('028', '0005', 34, 'Bella Santika', 'P', 'Finance', 6000000.00),
('029', '0005', 32, 'Cici Wibowo', 'P', 'Human Developer', 5500000.00),
('030', '0005', 29, 'Doni Prasetyo', 'L', 'Warehouse', 5000000.00),
('031', '0001', 28, 'Edi Rahman', 'L', 'Marketing', 5000000.00),
('032', '0001', 26, 'Fitri Nuraini', 'P', 'Karyawan Gudang', 4500000.00),
('033', '0001', 29, 'Gilang Saputra', 'L', 'Kasir', 4000000.00),
('037', '0002', 27, 'Kiki Firmansyah', 'L', 'Marketing', 5000000.00),
('038', '0002', 33, 'Laila Rahayu', 'P', 'Karyawan Gudang', 4500000.00),
('039', '0002', 30, 'Mira Permata', 'P', 'Kasir', 4000000.00),
('043', '0003', 28, 'Qori Santoso', 'P', 'Marketing', 5000000.00),
('044', '0003', 26, 'Rina Pratama', 'P', 'Karyawan Gudang', 4500000.00),
('045', '0003', 29, 'Sinta Ayu', 'P', 'Kasir', 4000000.00),
('049', '0004', 27, 'Wahyu Putra', 'L', 'Marketing', 5000000.00),
('050', '0004', 30, 'Xena Kusuma', 'P', 'Karyawan Gudang', 4500000.00),
('051', '0004', 26, 'Yudi Prasetyo', 'L', 'Kasir', 4000000.00),
('055', '0005', 28, 'Cici Salamah', 'P', 'Marketing', 5000000.00),
('056', '0005', 32, 'Doni Firmansyah', 'L', 'Karyawan Gudang', 4500000.00),
('057', '0005', 30, 'Eka Susilo', 'L', 'Kasir', 4000000.00),
('061', '0001', 28, 'Indra Kurniawan', 'L', 'Marketing', 5000000.00),
('062', '0001', 26, 'Joko Rahman', 'L', 'Karyawan Gudang', 4500000.00),
('063', '0001', 29, 'Kiki Anggraeni', 'P', 'Kasir', 4000000.00),
('067', '0002', 27, 'Oki Wahyu', 'L', 'Marketing', 5000000.00),
('068', '0002', 33, 'Putu Santoso', 'L', 'Karyawan Gudang', 4500000.00),
('069', '0002', 30, 'Qori Ayu', 'P', 'Kasir', 4000000.00),
('073', '0003', 28, 'Umi Rahayu', 'P', 'Marketing', 5000000.00),
('074', '0003', 26, 'Vina Putra', 'P', 'Karyawan Gudang', 4500000.00),
('075', '0003', 29, 'Wahyu Salamah', 'L', 'Kasir', 4000000.00),
('079', '0004', 27, 'Adi Firmansyah', 'L', 'Marketing', 5000000.00),
('080', '0004', 30, 'Bella Anggraeni', 'P', 'Karyawan Gudang', 4500000.00),
('081', '0004', 26, 'Cici Ayu', 'P', 'Kasir', 4000000.00),
('085', '0005', 28, 'Gilang Kurniawan', 'L', 'Marketing', 5000000.00),
('086', '0005', 32, 'Hana Rahayu', 'P', 'Karyawan Gudang', 4500000.00),
('087', '0005', 30, 'Indra Putra', 'L', 'Kasir', 4000000.00),
('091', '0001', 28, 'Mira Firmansyah', 'P', 'Marketing', 5000000.00),
('092', '0001', 26, 'Nina Anggraeni', 'P', 'Karyawan Gudang', 4500000.00),
('093', '0001', 29, 'Oki Permata', 'L', 'Kasir', 4000000.00),
('097', '0002', 27, 'Sinta Wulandari', 'P', 'Marketing', 5000000.00),
('098', '0002', 33, 'Teguh Salamah', 'L', 'Karyawan Gudang', 4500000.00),
('099', '0002', 30, 'Umi Mahendra', 'P', 'Kasir', 4000000.00),
('1', '1', 30, 'John Doe', 'L', 'Manager', 5000.00);

--
-- Triggers `data_karyawan`
--
DELIMITER $$
CREATE TRIGGER `LogKaryawanAfterUpdate` AFTER UPDATE ON `data_karyawan` FOR EACH ROW BEGIN
    -- Mencatat data karyawan yang baru saja diperbarui ke tabel log
    INSERT INTO KaryawanUpdateLog (
        KaryawanID,
        Nama,
        Posisi,
        Gaji_Lama,
        Gaji_Baru
    )
    VALUES (
        NEW.ID,
        NEW.Nama,
        NEW.Posisi,
        OLD.Gaji,
        NEW.Gaji
    );
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `ValidateSalaryBeforeUpdate` BEFORE UPDATE ON `data_karyawan` FOR EACH ROW BEGIN
    -- Cek apakah gaji baru lebih rendah dari gaji lama
    IF NEW.Gaji < OLD.Gaji THEN
        -- Batalkan operasi UPDATE dan tampilkan pesan kesalahan
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Gaji baru tidak boleh lebih rendah dari gaji lama.';
    END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `data_pelanggan`
--

CREATE TABLE `data_pelanggan` (
  `ID` char(4) NOT NULL,
  `ID_Cabang` char(4) DEFAULT NULL,
  `Umur` int(11) DEFAULT NULL,
  `Nama_Pelanggan` varchar(255) DEFAULT NULL,
  `Gender` char(1) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `data_pelanggan`
--

INSERT INTO `data_pelanggan` (`ID`, `ID_Cabang`, `Umur`, `Nama_Pelanggan`, `Gender`) VALUES
('0001', '0001', 32, 'Indra Pratiwi', 'P'),
('0002', '0002', 45, 'Mira Firmansyah', 'P'),
('0003', '0003', 34, 'Budi Nugraha', 'L'),
('0004', '0004', 39, 'Sinta Rahman', 'P'),
('0005', '0005', 52, 'Lala Anindita', 'P'),
('0006', '0001', 41, 'Zara Santoso', 'P'),
('0007', '0002', 30, 'Dian Wulandari', 'P'),
('0008', '0003', 23, 'Chandra Saputra', 'L'),
('0009', '0004', 53, 'Yudi Pratama', 'L'),
('0010', '0005', 26, 'Nina Purwanto', 'P'),
('0011', '0001', 37, 'Vina Maulana', 'P'),
('0012', '0002', 31, 'Endah Wijaya', 'P'),
('0013', '0003', 25, 'Hendra Kurniawan', 'L'),
('0014', '0004', 42, 'Teguh Hapsari', 'L'),
('0015', '0005', 36, 'Gita Utami', 'P'),
('0016', '0001', 49, 'Fajar Saputra', 'L'),
('0017', '0002', 44, 'Xena Firmansyah', 'P'),
('0018', '0003', 22, 'Kiki Nugraha', 'L'),
('0019', '0004', 33, 'Andi Lestari', 'L'),
('0020', '0005', 38, 'Joko Santoso', 'L'),
('0021', '0001', 46, 'Oki Maulana', 'L'),
('0022', '0002', 29, 'Umi Wijaya', 'P'),
('0023', '0003', 55, 'Putu Pratiwi', 'L'),
('0024', '0004', 24, 'Qori Wulandari', 'P'),
('0025', '0005', 28, 'Rina Pratama', 'P'),
('0026', '0001', 27, 'Nina Purwanto', 'P'),
('0027', '0002', 31, 'Sinta Rahman', 'P'),
('0028', '0003', 23, 'Yudi Hapsari', 'L'),
('0029', '0004', 40, 'Vina Maulana', 'P'),
('0030', '0005', 35, 'Hendra Nugraha', 'L'),
('0031', '0001', 21, 'Indra Wijaya', 'P'),
('0032', '0002', 48, 'Kiki Utami', 'L'),
('0033', '0003', 50, 'Putu Pratama', 'L'),
('0034', '0004', 26, 'Qori Santoso', 'P'),
('0035', '0005', 27, 'Rina Lestari', 'P'),
('0036', '0001', 34, 'Nina Purwanto', 'P'),
('0037', '0002', 38, 'Sinta Rahman', 'P'),
('0038', '0003', 25, 'Yudi Hapsari', 'L'),
('0039', '0004', 41, 'Vina Maulana', 'P'),
('0040', '0005', 28, 'Hendra Nugraha', 'L'),
('0041', '0001', 33, 'Indra Wijaya', 'P'),
('0042', '0002', 47, 'Kiki Utami', 'L'),
('0043', '0003', 55, 'Putu Pratama', 'L'),
('0044', '0004', 24, 'Qori Santoso', 'P'),
('0045', '0005', 29, 'Rina Lestari', 'P'),
('0046', '0001', 28, 'Nina Purwanto', 'P'),
('0047', '0002', 30, 'Sinta Rahman', 'P'),
('0048', '0003', 37, 'Yudi Hapsari', 'L'),
('0049', '0004', 44, 'Vina Maulana', 'P'),
('0050', '0005', 32, 'Hendra Nugraha', 'L'),
('0051', '0001', 50, 'Indra Wijaya', 'P'),
('0052', '0002', 29, 'Kiki Utami', 'L'),
('0053', '0003', 38, 'Putu Pratama', 'L'),
('0054', '0004', 27, 'Qori Santoso', 'P'),
('0055', '0005', 26, 'Rina Lestari', 'P'),
('0056', '0001', 35, 'Nina Purwanto', 'P'),
('0057', '0002', 45, 'Sinta Rahman', 'P'),
('0058', '0003', 39, 'Yudi Hapsari', 'L'),
('0059', '0004', 48, 'Vina Maulana', 'P'),
('0060', '0005', 33, 'Hendra Nugraha', 'L'),
('0061', '0001', 30, 'Indra Wijaya', 'P'),
('0062', '0002', 40, 'Kiki Utami', 'L'),
('0063', '0003', 28, 'Putu Pratama', 'L'),
('0064', '0004', 26, 'Qori Santoso', 'P'),
('0065', '0005', 29, 'Rina Lestari', 'P'),
('0066', '0001', 37, 'Nina Purwanto', 'P'),
('0067', '0002', 41, 'Sinta Rahman', 'P'),
('0068', '0003', 36, 'Yudi Hapsari', 'L'),
('0069', '0004', 35, 'Vina Maulana', 'P'),
('0070', '0005', 32, 'Hendra Nugraha', 'L'),
('0071', '0001', 31, 'Indra Wijaya', 'P'),
('0072', '0002', 42, 'Kiki Utami', 'L'),
('0073', '0003', 39, 'Putu Pratama', 'L'),
('0074', '0004', 25, 'Qori Santoso', 'P'),
('0075', '0005', 34, 'Rina Lestari', 'P'),
('0076', '0001', 33, 'Nina Purwanto', 'P'),
('0077', '0002', 28, 'Sinta Rahman', 'P'),
('0078', '0003', 38, 'Yudi Hapsari', 'L'),
('0079', '0004', 35, 'Vina Maulana', 'P'),
('0080', '0005', 27, 'Hendra Nugraha', 'L'),
('0081', '0001', 40, 'Indra Wijaya', 'P'),
('0082', '0002', 41, 'Kiki Utami', 'L'),
('0083', '0003', 32, 'Putu Pratama', 'L'),
('0084', '0004', 26, 'Qori Santoso', 'P'),
('0085', '0005', 35, 'Rina Lestari', 'P'),
('0086', '0001', 34, 'Nina Purwanto', 'P'),
('0087', '0002', 28, 'Sinta Rahman', 'P'),
('0088', '0003', 33, 'Yudi Hapsari', 'L'),
('0089', '0004', 32, 'Vina Maulana', 'P'),
('0090', '0005', 38, 'Hendra Nugraha', 'L'),
('0091', '0001', 30, 'Indra Wijaya', 'P'),
('0092', '0002', 39, 'Kiki Utami', 'L'),
('0093', '0003', 25, 'Putu Pratama', 'L'),
('0094', '0004', 37, 'Qori Santoso', 'P'),
('0095', '0005', 34, 'Rina Lestari', 'P'),
('0096', '0001', 32, 'Nina Purwanto', 'P'),
('0097', '0002', 28, 'Sinta Rahman', 'P'),
('0098', '0003', 40, 'Yudi Hapsari', 'L'),
('0099', '0004', 31, 'Vina Maulana', 'P'),
('0100', '0005', 36, 'Hendra Nugraha', 'L'),
('0101', '0001', 27, 'Indra Wijaya', 'P'),
('0102', '0002', 38, 'Kiki Utami', 'L'),
('0103', '0003', 34, 'Putu Pratama', 'L'),
('0104', '0004', 33, 'Qori Santoso', 'P'),
('0105', '0005', 29, 'Rina Lestari', 'P'),
('0106', '0001', 31, 'Nina Purwanto', 'P'),
('0107', '0002', 36, 'Sinta Rahman', 'P'),
('0108', '0003', 39, 'Yudi Hapsari', 'L'),
('0109', '0004', 30, 'Vina Maulana', 'P'),
('0110', '0005', 27, 'Hendra Nugraha', 'L'),
('0111', '0001', 33, 'Indra Wijaya', 'P'),
('0112', '0002', 37, 'Kiki Utami', 'L'),
('0113', '0003', 26, 'Putu Pratama', 'L'),
('0114', '0004', 35, 'Qori Santoso', 'P'),
('0115', '0005', 32, 'Rina Lestari', 'P'),
('0116', '0001', 38, 'Nina Purwanto', 'P'),
('0117', '0002', 28, 'Sinta Rahman', 'P'),
('0118', '0003', 34, 'Yudi Hapsari', 'L'),
('0119', '0004', 29, 'Vina Maulana', 'P'),
('0120', '0005', 40, 'Hendra Nugraha', 'L'),
('0121', '0001', 27, 'Indra Wijaya', 'P'),
('0122', '0002', 35, 'Kiki Utami', 'L'),
('0123', '0003', 32, 'Putu Pratama', 'L'),
('0124', '0004', 31, 'Qori Santoso', 'P'),
('0125', '0005', 39, 'Rina Lestari', 'P'),
('0126', '0001', 33, 'Nina Purwanto', 'P'),
('0127', '0002', 28, 'Sinta Rahman', 'P'),
('0128', '0003', 36, 'Yudi Hapsari', 'L'),
('0129', '0004', 35, 'Vina Maulana', 'P'),
('0130', '0005', 27, 'Hendra Nugraha', 'L'),
('0131', '0001', 30, 'Indra Wijaya', 'P'),
('0132', '0002', 39, 'Kiki Utami', 'L'),
('0133', '0003', 31, 'Putu Pratama', 'L'),
('0134', '0004', 27, 'Qori Santoso', 'P'),
('0135', '0005', 34, 'Rina Lestari', 'P'),
('0136', '0001', 38, 'Nina Purwanto', 'P'),
('0137', '0002', 35, 'Sinta Rahman', 'P'),
('0138', '0003', 39, 'Yudi Hapsari', 'L'),
('0139', '0004', 30, 'Vina Maulana', 'P'),
('0140', '0005', 32, 'Hendra Nugraha', 'L'),
('0141', '0001', 29, 'Indra Wijaya', 'P'),
('0142', '0002', 34, 'Kiki Utami', 'L'),
('0143', '0003', 28, 'Putu Pratama', 'L'),
('0144', '0004', 27, 'Qori Santoso', 'P'),
('0145', '0005', 36, 'Rina Lestari', 'P'),
('0146', '0001', 31, 'Nina Purwanto', 'P'),
('0147', '0002', 33, 'Sinta Rahman', 'P'),
('0148', '0003', 37, 'Yudi Hapsari', 'L'),
('0149', '0004', 29, 'Vina Maulana', 'P'),
('0150', '0005', 40, 'Hendra Nugraha', 'L'),
('0151', '0001', 27, 'Indra Wijaya', 'P'),
('0152', '0002', 35, 'Kiki Utami', 'L'),
('0153', '0003', 34, 'Putu Pratama', 'L'),
('0154', '0004', 26, 'Qori Santoso', 'P'),
('0155', '0005', 29, 'Rina Lestari', 'P'),
('0156', '0001', 32, 'Nina Purwanto', 'P'),
('0157', '0002', 36, 'Sinta Rahman', 'P'),
('0158', '0003', 39, 'Yudi Hapsari', 'L'),
('0159', '0004', 31, 'Vina Maulana', 'P'),
('0160', '0005', 28, 'Hendra Nugraha', 'L'),
('0161', '0001', 33, 'Indra Wijaya', 'P'),
('0162', '0002', 38, 'Kiki Utami', 'L'),
('0163', '0003', 34, 'Putu Pratama', 'L'),
('0164', '0004', 35, 'Qori Santoso', 'P'),
('0165', '0005', 32, 'Rina Lestari', 'P'),
('0166', '0001', 28, 'Nina Purwanto', 'P'),
('0167', '0002', 39, 'Sinta Rahman', 'P'),
('0168', '0003', 33, 'Yudi Hapsari', 'L'),
('0169', '0004', 36, 'Vina Maulana', 'P'),
('0170', '0005', 27, 'Hendra Nugraha', 'L'),
('0171', '0001', 40, 'Indra Wijaya', 'P'),
('0172', '0002', 41, 'Kiki Utami', 'L'),
('0173', '0003', 32, 'Putu Pratama', 'L'),
('0174', '0004', 30, 'Qori Santoso', 'P'),
('0175', '0005', 29, 'Rina Lestari', 'P'),
('0176', '0001', 33, 'Nina Purwanto', 'P'),
('0177', '0002', 34, 'Sinta Rahman', 'P'),
('0178', '0003', 38, 'Yudi Hapsari', 'L'),
('0179', '0004', 29, 'Vina Maulana', 'P'),
('0180', '0005', 37, 'Hendra Nugraha', 'L'),
('0181', '0001', 35, 'Indra Wijaya', 'P'),
('0182', '0002', 31, 'Kiki Utami', 'L'),
('0183', '0003', 26, 'Putu Pratama', 'L'),
('0184', '0004', 30, 'Qori Santoso', 'P'),
('0185', '0005', 27, 'Rina Lestari', 'P'),
('0186', '0001', 39, 'Nina Purwanto', 'P'),
('0187', '0002', 32, 'Sinta Rahman', 'P'),
('0188', '0003', 33, 'Yudi Hapsari', 'L'),
('0189', '0004', 31, 'Vina Maulana', 'P'),
('0190', '0005', 28, 'Hendra Nugraha', 'L'),
('0191', '0001', 34, 'Indra Wijaya', 'P'),
('0192', '0002', 35, 'Kiki Utami', 'L'),
('0193', '0003', 27, 'Putu Pratama', 'L'),
('0194', '0004', 30, 'Qori Santoso', 'P'),
('0195', '0005', 26, 'Rina Lestari', 'P'),
('0196', '0001', 28, 'Nina Purwanto', 'P'),
('0197', '0002', 38, 'Sinta Rahman', 'P'),
('0198', '0003', 34, 'Yudi Hapsari', 'L'),
('0199', '0004', 31, 'Vina Maulana', 'P'),
('0200', '0005', 36, 'Hendra Nugraha', 'L'),
('1', '1', 30, 'Jane Doe', 'F');

--
-- Triggers `data_pelanggan`
--
DELIMITER $$
CREATE TRIGGER `ValidatePelangganBeforeDelete` BEFORE DELETE ON `data_pelanggan` FOR EACH ROW BEGIN
    DECLARE transaksi_count INT;

    -- Hitung jumlah transaksi terkait pelanggan yang akan dihapus
    SELECT COUNT(*)
    INTO transaksi_count
    FROM data_transaksi
    WHERE ID_pelanggan = OLD.ID;

    -- Jika ada transaksi terkait, batalkan operasi DELETE dan tampilkan pesan kesalahan
    IF transaksi_count > 0 THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Tidak dapat menghapus pelanggan karena ada transaksi terkait.';
    END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `ValidatePelangganBeforeUpdate` BEFORE UPDATE ON `data_pelanggan` FOR EACH ROW BEGIN
    DECLARE transaksi_count INT;

    -- Hitung jumlah transaksi terkait pelanggan yang di-update
    SELECT COUNT(*)
    INTO transaksi_count
    FROM data_transaksi
    WHERE ID_pelanggan = OLD.ID;

    -- Jika ada transaksi terkait, pastikan perubahan yang dilakukan sesuai
    IF OLD.ID <> NEW.ID THEN
        -- Jika ID pelanggan diubah, batalkan operasi UPDATE
        SET @dummy = 1 / 0; -- Menghasilkan error untuk membatalkan update
    END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `data_transaksi`
--

CREATE TABLE `data_transaksi` (
  `ID_Transaksi` char(11) NOT NULL,
  `ID_Pelanggan` char(4) DEFAULT NULL,
  `Tanggal_Transaksi` date DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `data_transaksi`
--

INSERT INTO `data_transaksi` (`ID_Transaksi`, `ID_Pelanggan`, `Tanggal_Transaksi`) VALUES
('1', '1', '2024-07-01'),
('20240101001', '0012', '2024-01-01'),
('20240101002', '0147', '2024-01-01'),
('20240102001', '0034', '2024-01-02'),
('20240102002', '0198', '2024-01-02'),
('20240103001', '0076', '2024-01-03'),
('20240103002', '0125', '2024-01-03'),
('20240104001', '0200', '2024-01-04'),
('20240104002', '0059', '2024-01-04'),
('20240105001', '0110', '2024-01-05'),
('20240105002', '0163', '2024-01-05'),
('20240106001', '0184', '2024-01-06'),
('20240106002', '0091', '2024-01-06'),
('20240107001', '0007', '2024-01-07'),
('20240107002', '0150', '2024-01-07'),
('20240108001', '0044', '2024-01-08'),
('20240108002', '0179', '2024-01-08'),
('20240109001', '0018', '2024-01-09'),
('20240109002', '0085', '2024-01-09'),
('20240110001', '0139', '2024-01-10'),
('20240110002', '0063', '2024-01-10'),
('20240111001', '0201', '2024-01-11'),
('20240111002', '0104', '2024-01-11'),
('20240112001', '0029', '2024-01-12'),
('20240112002', '0117', '2024-01-12'),
('20240113001', '0193', '2024-01-13'),
('20240113002', '0047', '2024-01-13'),
('20240114001', '0078', '2024-01-14'),
('20240114002', '0156', '2024-01-14'),
('20240115001', '0031', '2024-01-15'),
('20240115002', '0165', '2024-01-15'),
('20240116001', '0054', '2024-01-16'),
('20240116002', '0120', '2024-01-16'),
('20240117001', '0173', '2024-01-17'),
('20240117002', '0003', '2024-01-17'),
('20240118001', '0196', '2024-01-18'),
('20240118002', '0082', '2024-01-18'),
('20240119001', '0118', '2024-01-19'),
('20240119002', '0065', '2024-01-19'),
('20240120001', '0024', '2024-01-20'),
('20240120002', '0134', '2024-01-20'),
('20240121001', '0174', '2024-01-21'),
('20240121002', '0200', '2024-01-21'),
('20240122001', '0189', '2024-01-22'),
('20240122002', '0017', '2024-01-22'),
('20240123001', '0098', '2024-01-23'),
('20240123002', '0051', '2024-01-23'),
('20240124001', '0141', '2024-01-24'),
('20240124002', '0009', '2024-01-24'),
('20240125001', '0190', '2024-01-25'),
('20240125002', '0075', '2024-01-25'),
('20240126001', '0109', '2024-01-26'),
('20240126002', '0168', '2024-01-26'),
('20240127001', '0035', '2024-01-27'),
('20240127002', '0013', '2024-01-27'),
('20240128001', '0123', '2024-01-28'),
('20240128002', '0201', '2024-01-28'),
('20240129001', '0046', '2024-01-29'),
('20240129002', '0194', '2024-01-29'),
('20240130001', '0068', '2024-01-30'),
('20240130002', '0177', '2024-01-30'),
('20240201001', '0155', '2024-02-01'),
('20240201002', '0043', '2024-02-01'),
('20240202001', '0020', '2024-02-02'),
('20240202002', '0191', '2024-02-02'),
('20240203001', '0185', '2024-02-03'),
('20240203002', '0102', '2024-02-03'),
('20240204001', '0070', '2024-02-04'),
('20240204002', '0131', '2024-02-04'),
('20240205001', '0015', '2024-02-05'),
('20240205002', '0200', '2024-02-05'),
('20240206001', '0057', '2024-02-06'),
('20240206002', '0144', '2024-02-06'),
('20240207001', '0095', '2024-02-07'),
('20240207002', '0160', '2024-02-07'),
('20240208001', '0011', '2024-02-08'),
('20240208002', '0176', '2024-02-08'),
('20240209001', '0182', '2024-02-09'),
('20240209002', '0066', '2024-02-09'),
('20240210001', '0028', '2024-02-10'),
('20240210002', '0135', '2024-02-10'),
('20240211001', '0045', '2024-02-11'),
('20240211002', '0199', '2024-02-11'),
('20240212001', '0158', '2024-02-12'),
('20240212002', '0039', '2024-02-12'),
('20240213001', '0121', '2024-02-13'),
('20240213002', '0088', '2024-02-13'),
('20240214001', '0171', '2024-02-14'),
('20240214002', '0023', '2024-02-14'),
('20240215001', '0201', '2024-02-15'),
('20240215002', '0148', '2024-02-15'),
('20240216001', '0037', '2024-02-16'),
('20240216002', '0119', '2024-02-16'),
('20240217001', '0053', '2024-02-17'),
('20240217002', '0064', '2024-02-17'),
('20240218001', '0164', '2024-02-18'),
('20240218002', '0192', '2024-02-18'),
('20240219001', '0014', '2024-02-19'),
('20240219002', '0073', '2024-02-19'),
('20240220001', '0200', '2024-02-20'),
('20240220002', '0086', '2024-02-20'),
('20240221001', '0137', '2024-02-21'),
('20240221002', '0172', '2024-02-21'),
('20240222001', '0107', '2024-02-22'),
('20240222002', '0002', '2024-02-22'),
('20240223001', '0040', '2024-02-23'),
('20240223002', '0183', '2024-02-23'),
('20240224001', '0092', '2024-02-24'),
('20240224002', '0152', '2024-02-24'),
('20240225001', '0016', '2024-02-25'),
('20240225002', '0126', '2024-02-25'),
('20240226001', '0195', '2024-02-26'),
('20240226002', '0050', '2024-02-26'),
('20240227001', '0161', '2024-02-27'),
('20240227002', '0030', '2024-02-27'),
('20240228001', '0048', '2024-02-28'),
('20240228002', '0113', '2024-02-28'),
('20240301001', '0175', '2024-03-01'),
('20240301002', '0006', '2024-03-01'),
('20240302001', '0143', '2024-03-02'),
('20240302002', '0069', '2024-03-02'),
('20240303001', '0194', '2024-03-03'),
('20240303002', '0081', '2024-03-03'),
('20240304001', '0052', '2024-03-04'),
('20240304002', '0025', '2024-03-04'),
('20240305001', '0188', '2024-03-05'),
('20240305002', '0100', '2024-03-05'),
('20240306001', '0140', '2024-03-06'),
('20240306002', '0010', '2024-03-06'),
('20240307001', '0166', '2024-03-07'),
('20240307002', '0136', '2024-03-07'),
('20240308001', '0074', '2024-03-08'),
('20240308002', '0058', '2024-03-08'),
('20240309001', '0201', '2024-03-09'),
('20240309002', '0170', '2024-03-09'),
('20240310001', '0061', '2024-03-10'),
('20240310002', '0197', '2024-03-10'),
('20240311001', '0027', '2024-03-11'),
('20240311002', '0111', '2024-03-11'),
('20240312001', '0187', '2024-03-12'),
('20240312002', '0083', '2024-03-12'),
('20240313001', '0042', '2024-03-13'),
('20240313002', '0138', '2024-03-13'),
('20240314001', '0099', '2024-03-14'),
('20240314002', '0001', '2024-03-14'),
('20240315001', '0038', '2024-03-15'),
('20240315002', '0167', '2024-03-15'),
('20240316001', '0114', '2024-03-16'),
('20240316002', '0154', '2024-03-16'),
('20240317001', '0056', '2024-03-17'),
('20240317002', '0178', '2024-03-17'),
('20240318001', '0200', '2024-03-18'),
('20240318002', '0079', '2024-03-18'),
('20240319001', '0199', '2024-03-19'),
('20240319002', '0041', '2024-03-19'),
('20240320001', '0133', '2024-03-20'),
('20240320002', '0106', '2024-03-20'),
('20240321001', '0019', '2024-03-21'),
('20240321002', '0129', '2024-03-21'),
('20240322001', '0060', '2024-03-22'),
('20240322002', '0186', '2024-03-22'),
('20240323001', '0201', '2024-03-23'),
('20240323002', '0171', '2024-03-23'),
('20240324001', '0033', '2024-03-24'),
('20240324002', '0146', '2024-03-24'),
('20240325001', '0093', '2024-03-25'),
('20240325002', '0190', '2024-03-25'),
('20240326001', '0071', '2024-03-26'),
('20240326002', '0153', '2024-03-26'),
('20240327001', '0026', '2024-03-27'),
('20240327002', '0115', '2024-03-27'),
('20240328001', '0142', '2024-03-28'),
('20240328002', '0012', '2024-03-28'),
('20240329001', '0067', '2024-03-29'),
('20240329002', '0105', '2024-03-29'),
('20240330001', '0200', '2024-03-30'),
('20240330002', '0072', '2024-03-30'),
('20240331001', '0130', '2024-03-31'),
('20240331002', '0044', '2024-03-31'),
('20240401001', '0198', '2024-04-01'),
('20240401002', '0201', '2024-04-01'),
('20240402001', '0084', '2024-04-02'),
('20240402002', '0159', '2024-04-02'),
('20240403001', '0055', '2024-04-03'),
('20240403002', '0124', '2024-04-03'),
('20240404001', '0036', '2024-04-04'),
('20240404002', '0116', '2024-04-04'),
('20240405001', '0200', '2024-04-05'),
('20240405002', '0077', '2024-04-05'),
('20240406001', '0145', '2024-04-06'),
('20240406002', '0192', '2024-04-06'),
('20240407001', '0080', '2024-04-07'),
('20240407002', '0108', '2024-04-07'),
('20240408001', '0022', '2024-04-08'),
('20240408002', '0132', '2024-04-08'),
('20240409001', '0180', '2024-04-09'),
('20240409002', '0014', '2024-04-09'),
('20240410001', '0062', '2024-04-10'),
('20240410002', '0201', '2024-04-10'),
('20240411001', '0032', '2024-04-11'),
('20240411002', '0151', '2024-04-11'),
('20240412001', '0074', '2024-04-12'),
('20240412002', '0181', '2024-04-12'),
('20240413001', '0021', '2024-04-13'),
('20240413002', '0110', '2024-04-13'),
('20240414001', '0054', '2024-04-14'),
('20240414002', '0193', '2024-04-14'),
('20240415001', '0169', '2024-04-15'),
('20240415002', '0034', '2024-04-15'),
('20240416001', '0200', '2024-04-16'),
('20240416002', '0013', '2024-04-16'),
('20240417001', '0178', '2024-04-17'),
('20240417002', '0089', '2024-04-17'),
('20240418001', '0141', '2024-04-18'),
('20240418002', '0058', '2024-04-18'),
('20240419001', '0201', '2024-04-19'),
('20240419002', '0030', '2024-04-19'),
('20240420001', '0175', '2024-04-20'),
('20240420002', '0094', '2024-04-20'),
('20240421001', '0196', '2024-04-21'),
('20240421002', '0125', '2024-04-21'),
('20240422001', '0059', '2024-04-22'),
('20240422002', '0038', '2024-04-22'),
('20240423001', '0187', '2024-04-23'),
('20240423002', '0024', '2024-04-23'),
('20240424001', '0049', '2024-04-24'),
('20240424002', '0176', '2024-04-24'),
('20240425001', '0201', '2024-04-25'),
('20240425002', '0192', '2024-04-25'),
('20240426001', '0139', '2024-04-26'),
('20240426002', '0060', '2024-04-26'),
('20240427001', '0154', '2024-04-27'),
('20240427002', '0081', '2024-04-27'),
('20240428001', '0008', '2024-04-28'),
('20240428002', '0194', '2024-04-28'),
('20240429001', '0023', '2024-04-29'),
('20240429002', '0117', '2024-04-29'),
('20240430001', '0170', '2024-04-30'),
('20240430002', '0010', '2024-04-30'),
('20240501001', '0086', '2024-05-01'),
('20240501002', '0195', '2024-05-01'),
('20240502001', '0047', '2024-05-02'),
('20240502002', '0200', '2024-05-02'),
('20240503001', '0131', '2024-05-03'),
('20240503002', '0182', '2024-05-03'),
('20240504001', '0072', '2024-05-04'),
('20240504002', '0050', '2024-05-04'),
('20240505001', '0174', '2024-05-05'),
('20240505002', '0097', '2024-05-05'),
('20240506001', '0201', '2024-05-06'),
('20240506002', '0020', '2024-05-06'),
('20240507001', '0193', '2024-05-07'),
('20240507002', '0011', '2024-05-07'),
('20240508001', '0140', '2024-05-08'),
('20240508002', '0163', '2024-05-08'),
('20240509001', '0053', '2024-05-09'),
('20240509002', '0104', '2024-05-09'),
('20240510001', '0036', '2024-05-10'),
('20240510002', '0201', '2024-05-10'),
('20240511001', '0178', '2024-05-11'),
('20240511002', '0194', '2024-05-11'),
('20240512001', '0087', '2024-05-12'),
('20240512002', '0135', '2024-05-12'),
('20240513001', '0021', '2024-05-13'),
('20240513002', '0185', '2024-05-13'),
('20240514001', '0116', '2024-05-14'),
('20240514002', '0065', '2024-05-14'),
('20240515001', '0200', '2024-05-15'),
('20240515002', '0170', '2024-05-15'),
('20240516001', '0039', '2024-05-16'),
('20240516002', '0148', '2024-05-16'),
('20240517001', '0191', '2024-05-17'),
('20240517002', '0099', '2024-05-17'),
('20240518001', '0122', '2024-05-18'),
('20240518002', '0013', '2024-05-18'),
('20240519001', '0174', '2024-05-19'),
('20240519002', '0031', '2024-05-19'),
('20240520001', '0066', '2024-05-20'),
('20240520002', '0200', '2024-05-20'),
('20240521001', '0149', '2024-05-21'),
('20240521002', '0180', '2024-05-21'),
('20240522001', '0051', '2024-05-22'),
('20240522002', '0027', '2024-05-22'),
('20240523001', '0193', '2024-05-23'),
('20240523002', '0088', '2024-05-23'),
('20240524001', '0105', '2024-05-24'),
('20240524002', '0179', '2024-05-24'),
('20240525001', '0012', '2024-05-25'),
('20240525002', '0134', '2024-05-25'),
('20240526001', '0063', '2024-05-26'),
('20240526002', '0201', '2024-05-26'),
('20240527001', '0166', '2024-05-27'),
('20240527002', '0029', '2024-05-27'),
('20240528001', '0080', '2024-05-28'),
('20240528002', '0192', '2024-05-28'),
('20240529001', '0052', '2024-05-29'),
('20240529002', '0175', '2024-05-29'),
('20240530001', '0044', '2024-05-30'),
('20240530002', '0188', '2024-05-30'),
('20240531001', '0201', '2024-05-31'),
('20240531002', '0128', '2024-05-31');

-- --------------------------------------------------------

--
-- Stand-in structure for view `mid_range_high_price_products_cascaded`
-- (See below for the actual view)
--
CREATE TABLE `mid_range_high_price_products_cascaded` (
`ID` char(4)
,`Jenis_Barang` varchar(50)
,`Kategori_Barang` varchar(50)
,`Merek_Produk` varchar(50)
,`Nama_Barang` varchar(100)
,`Harga_Barang` decimal(10,2)
);

-- --------------------------------------------------------

--
-- Table structure for table `produkpembelian`
--

CREATE TABLE `produkpembelian` (
  `produk_id` int(11) NOT NULL,
  `tanggal_pembelian` date NOT NULL,
  `jumlah` int(11) DEFAULT NULL,
  `harga` decimal(10,2) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Table structure for table `produk_toko_kecantikan`
--

CREATE TABLE `produk_toko_kecantikan` (
  `ID` char(4) NOT NULL,
  `Jenis_Barang` varchar(50) DEFAULT NULL,
  `Kategori_Barang` varchar(50) DEFAULT NULL,
  `Merek_Produk` varchar(50) DEFAULT NULL,
  `Nama_Barang` varchar(100) DEFAULT NULL,
  `Harga_Barang` decimal(10,2) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `produk_toko_kecantikan`
--

INSERT INTO `produk_toko_kecantikan` (`ID`, `Jenis_Barang`, `Kategori_Barang`, `Merek_Produk`, `Nama_Barang`, `Harga_Barang`) VALUES
('0001', 'Kosmetik', 'Lipstik', 'Wardah', 'Wardah Exclusive Matte Lip Cream', 65000.00),
('0002', 'Kosmetik', 'Foundation', 'Emina', 'Emina Bare With Me Mineral Foundation', 70000.00),
('0003', 'Perawatan Rambut', 'Shampoo', 'Maybelline', 'Maybelline Hydra Shampoo', 55000.00),
('0004', 'Perawatan Rambut', 'Conditioner', 'MAC', 'MAC Repair Conditioner', 90000.00),
('0005', 'Kosmetik', 'Eyeliner', 'YOU', 'YOU Eyeliner Pencil', 60000.00),
('0006', 'Perawatan Badan', 'Body Lotion', 'Glad2Glow', 'Glad2Glow Moisturizing Body Lotion', 85000.00),
('0007', 'Kosmetik', 'Maskara', 'Skintific', 'Skintific Volumizing Mascara', 75000.00),
('0008', 'Kosmetik', 'Blush On', 'Sea Make Up', 'Sea Make Up Blush On', 55000.00),
('0009', 'Perawatan Badan', 'Body Scrub', 'Pink Flash', 'Pink Flash Body Scrub', 65000.00),
('0010', 'Kosmetik', 'Lip Balm', 'Wardah', 'Wardah Lip Balm', 35000.00),
('0011', 'Kosmetik', 'Primer', 'Emina', 'Emina Pore Ranger Primer', 70000.00),
('0012', 'Perawatan Rambut', 'Hair Mask', 'Maybelline', 'Maybelline Hair Repair Mask', 85000.00),
('0013', 'Perawatan Rambut', 'Serum', 'MAC', 'MAC Hair Serum', 95000.00),
('0014', 'Kosmetik', 'Concealer', 'YOU', 'YOU Concealer', 60000.00),
('0015', 'Perawatan Badan', 'Hand Cream', 'Glad2Glow', 'Glad2Glow Hand Cream', 70000.00),
('0016', 'Kosmetik', 'Lip Tint', 'Skintific', 'Skintific Lip Tint', 60000.00),
('0017', 'Kosmetik', 'Eyeshadow', 'Sea Make Up', 'Sea Make Up Eyeshadow Palette', 85000.00),
('0018', 'Perawatan Badan', 'Body Wash', 'Pink Flash', 'Pink Flash Body Wash', 70000.00),
('0019', 'Kosmetik', 'Setting Spray', 'Wardah', 'Wardah Long Lasting Setting Spray', 75000.00),
('0020', 'Kosmetik', 'Highlighter', 'Emina', 'Emina Highlighter', 60000.00),
('0021', 'Kosmetik', 'Lipstik', 'MAC', 'MAC Matte Lipstick', 95000.00),
('0022', 'Kosmetik', 'Foundation', 'YOU', 'YOU Perfect Coverage Foundation', 80000.00),
('0023', 'Perawatan Rambut', 'Shampoo', 'Glad2Glow', 'Glad2Glow Anti-Dandruff Shampoo', 70000.00),
('0024', 'Perawatan Rambut', 'Conditioner', 'Skintific', 'Skintific Hydrating Conditioner', 85000.00),
('0025', 'Kosmetik', 'Eyeliner', 'Sea Make Up', 'Sea Make Up Liquid Eyeliner', 75000.00),
('0026', 'Perawatan Badan', 'Body Lotion', 'Pink Flash', 'Pink Flash Brightening Body Lotion', 80000.00),
('0027', 'Kosmetik', 'Maskara', 'Wardah', 'Wardah Volume Expert Mascara', 75000.00),
('0028', 'Kosmetik', 'Blush On', 'Emina', 'Emina Cheeklit Blush On', 50000.00),
('0029', 'Perawatan Badan', 'Body Scrub', 'Maybelline', 'Maybelline Gentle Body Scrub', 65000.00),
('0030', 'Kosmetik', 'Lip Balm', 'MAC', 'MAC Lip Conditioner', 40000.00),
('0031', 'Kosmetik', 'Primer', 'YOU', 'YOU Primer Base', 65000.00),
('0032', 'Perawatan Rambut', 'Hair Mask', 'Glad2Glow', 'Glad2Glow Nourishing Hair Mask', 85000.00),
('0033', 'Perawatan Rambut', 'Serum', 'Skintific', 'Skintific Anti-Frizz Hair Serum', 95000.00),
('0034', 'Kosmetik', 'Concealer', 'Sea Make Up', 'Sea Make Up Concealer Pen', 60000.00),
('0035', 'Perawatan Badan', 'Hand Cream', 'Pink Flash', 'Pink Flash Moisturizing Hand Cream', 70000.00),
('0036', 'Kosmetik', 'Lip Tint', 'Wardah', 'Wardah Lip Tint', 60000.00),
('0037', 'Kosmetik', 'Eyeshadow', 'Emina', 'Emina Eyeshadow Palette', 80000.00),
('0038', 'Perawatan Badan', 'Body Wash', 'Maybelline', 'Maybelline Revitalizing Body Wash', 70000.00),
('0039', 'Kosmetik', 'Setting Spray', 'MAC', 'MAC Fix + Setting Spray', 80000.00),
('0040', 'Kosmetik', 'Highlighter', 'YOU', 'YOU Highlighting Powder', 60000.00),
('0041', 'Kosmetik', 'Lipstik', 'Glad2Glow', 'Glad2Glow Lip Crayon', 60000.00),
('0042', 'Kosmetik', 'Foundation', 'Skintific', 'Skintific Full Coverage Foundation', 80000.00),
('0043', 'Perawatan Rambut', 'Shampoo', 'Sea Make Up', 'Sea Make Up Strengthening Shampoo', 70000.00),
('0044', 'Perawatan Rambut', 'Conditioner', 'Pink Flash', 'Pink Flash Conditioning Treatment', 75000.00),
('0045', 'Kosmetik', 'Eyeliner', 'Wardah', 'Wardah Eye Xpert Eyeliner', 60000.00),
('0046', 'Perawatan Badan', 'Body Lotion', 'Emina', 'Emina Soothing Body Lotion', 80000.00),
('0047', 'Kosmetik', 'Maskara', 'Maybelline', 'Maybelline Lash Sensational Mascara', 75000.00),
('0048', 'Kosmetik', 'Blush On', 'MAC', 'MAC Powder Blush', 70000.00),
('0049', 'Perawatan Badan', 'Body Scrub', 'YOU', 'YOU Exfoliating Body Scrub', 65000.00),
('0050', 'Kosmetik', 'Lip Balm', 'Glad2Glow', 'Glad2Glow Lip Balm', 40000.00),
('0051', 'Kosmetik', 'Primer', 'Skintific', 'Skintific Primer Base', 70000.00),
('0052', 'Perawatan Rambut', 'Hair Mask', 'Sea Make Up', 'Sea Make Up Repair Hair Mask', 85000.00),
('0053', 'Perawatan Rambut', 'Serum', 'Pink Flash', 'Pink Flash Hair Serum', 95000.00),
('0054', 'Kosmetik', 'Concealer', 'Wardah', 'Wardah Liquid Concealer', 60000.00),
('0055', 'Perawatan Badan', 'Hand Cream', 'Emina', 'Emina Hand Cream', 70000.00),
('0056', 'Kosmetik', 'Lip Tint', 'Maybelline', 'Maybelline Lip Tint', 60000.00),
('0057', 'Kosmetik', 'Eyeshadow', 'Glad2Glow', 'Glad2Glow Eyeshadow Palette', 80000.00),
('0058', 'Perawatan Badan', 'Body Wash', 'Skintific', 'Skintific Hydrating Body Wash', 70000.00),
('0059', 'Kosmetik', 'Setting Spray', 'Sea Make Up', 'Sea Make Up Setting Spray', 75000.00),
('0060', 'Kosmetik', 'Highlighter', 'Pink Flash', 'Pink Flash Highlighter', 60000.00),
('0061', 'Kosmetik', 'Lipstik', 'Wardah', 'Wardah Intense Matte Lipstick', 65000.00),
('0062', 'Kosmetik', 'Foundation', 'Emina', 'Emina Light Fit Foundation', 70000.00),
('0063', 'Perawatan Rambut', 'Shampoo', 'Maybelline', 'Maybelline Nourishing Shampoo', 55000.00),
('0064', 'Perawatan Rambut', 'Conditioner', 'MAC', 'MAC Moisture Conditioner', 90000.00),
('0065', 'Kosmetik', 'Eyeliner', 'YOU', 'YOU Liquid Eyeliner', 65000.00),
('0066', 'Perawatan Badan', 'Body Lotion', 'Glad2Glow', 'Glad2Glow Rejuvenating Body Lotion', 85000.00),
('0067', 'Kosmetik', 'Maskara', 'Skintific', 'Skintific Curling Mascara', 75000.00),
('0068', 'Kosmetik', 'Blush On', 'Sea Make Up', 'Sea Make Up Cream Blush', 55000.00),
('0069', 'Perawatan Badan', 'Body Scrub', 'Pink Flash', 'Pink Flash Exfoliating Body Scrub', 65000.00),
('0070', 'Kosmetik', 'Lip Balm', 'Wardah', 'Wardah Lip Balm Pink', 35000.00),
('0071', 'Kosmetik', 'Primer', 'Emina', 'Emina Blur Primer', 70000.00),
('0072', 'Perawatan Rambut', 'Hair Mask', 'Maybelline', 'Maybelline Deep Conditioning Mask', 85000.00),
('0073', 'Perawatan Rambut', 'Serum', 'MAC', 'MAC Fortifying Hair Serum', 95000.00),
('0074', 'Kosmetik', 'Concealer', 'YOU', 'YOU Cover Up Concealer', 60000.00),
('0075', 'Perawatan Badan', 'Hand Cream', 'Glad2Glow', 'Glad2Glow Softening Hand Cream', 70000.00),
('0076', 'Kosmetik', 'Lip Tint', 'Skintific', 'Skintific Tint Lip Balm', 60000.00),
('0077', 'Kosmetik', 'Eyeshadow', 'Sea Make Up', 'Sea Make Up Shimmer Eyeshadow', 85000.00),
('0078', 'Perawatan Badan', 'Body Wash', 'Pink Flash', 'Pink Flash Moisturizing Body Wash', 70000.00),
('0079', 'Kosmetik', 'Setting Spray', 'Wardah', 'Wardah Dewy Setting Spray', 75000.00),
('0080', 'Kosmetik', 'Highlighter', 'Emina', 'Emina Glow Highlighter', 60000.00),
('0081', 'Kosmetik', 'Lipstik', 'MAC', 'MAC Retro Matte Lipstick', 95000.00),
('0082', 'Kosmetik', 'Foundation', 'YOU', 'YOU Liquid Foundation', 80000.00),
('0083', 'Perawatan Rambut', 'Shampoo', 'Glad2Glow', 'Glad2Glow Volumizing Shampoo', 70000.00),
('0084', 'Perawatan Rambut', 'Conditioner', 'Skintific', 'Skintific Anti-Frizz Conditioner', 85000.00),
('0085', 'Kosmetik', 'Eyeliner', 'Sea Make Up', 'Sea Make Up Gel Eyeliner', 75000.00),
('0086', 'Perawatan Badan', 'Body Lotion', 'Pink Flash', 'Pink Flash Repairing Body Lotion', 80000.00),
('0087', 'Kosmetik', 'Maskara', 'Wardah', 'Wardah Perfect Curl Mascara', 75000.00),
('0088', 'Kosmetik', 'Blush On', 'Emina', 'Emina Cream Blush', 50000.00),
('0089', 'Perawatan Badan', 'Body Scrub', 'Maybelline', 'Maybelline Exfoliating Scrub', 65000.00),
('0090', 'Kosmetik', 'Lip Balm', 'MAC', 'MAC Lip Balm SPF 15', 40000.00),
('0091', 'Kosmetik', 'Primer', 'YOU', 'YOU Hydrating Primer', 65000.00),
('0092', 'Perawatan Rambut', 'Hair Mask', 'Glad2Glow', 'Glad2Glow Revitalizing Hair Mask', 85000.00),
('0093', 'Perawatan Rambut', 'Serum', 'Skintific', 'Skintific Shine Serum', 95000.00),
('0094', 'Kosmetik', 'Concealer', 'Sea Make Up', 'Sea Make Up Concealer Stick', 60000.00),
('0095', 'Perawatan Badan', 'Hand Cream', 'Pink Flash', 'Pink Flash Nourishing Hand Cream', 70000.00),
('0096', 'Kosmetik', 'Lip Tint', 'Wardah', 'Wardah Lip Tint Red', 60000.00),
('0097', 'Kosmetik', 'Eyeshadow', 'Emina', 'Emina Eyeshadow Cream', 80000.00),
('0098', 'Perawatan Badan', 'Body Wash', 'Maybelline', 'Maybelline Energizing Body Wash', 70000.00),
('0099', 'Kosmetik', 'Setting Spray', 'MAC', 'MAC Matte Setting Spray', 80000.00),
('0100', 'Kosmetik', 'Highlighter', 'YOU', 'YOU Illuminating Highlighter', 60000.00),
('1', 'kosmetik', 'Lipstik', 'Merek A', 'Lipstik Merah', 10.00);

--
-- Triggers `produk_toko_kecantikan`
--
DELIMITER $$
CREATE TRIGGER `LogProdukAfterInsert` AFTER INSERT ON `produk_toko_kecantikan` FOR EACH ROW BEGIN
    -- Mencatat data barang yang baru saja dimasukkan ke tabel log
    INSERT INTO ProdukLog (
        ID,
        Nama_Barang,
        Kategori_Barang,
        Merek_Produk,
        Harga_Barang
    )
    VALUES (
        NEW.ID,
        NEW.Nama_Barang,
        NEW.Kategori_Barang,
        NEW.Merek_Produk,
        NEW.Harga_Barang
    );
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `ValidatePriceBeforeInsert` BEFORE INSERT ON `produk_toko_kecantikan` FOR EACH ROW BEGIN
    -- Cek apakah harga barang kurang dari batas minimum
    IF NEW.Harga_Barang < 0.01 THEN
        -- Batalkan operasi INSERT dan tampilkan pesan kesalahan
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Harga Barang tidak boleh kurang dari 0.01';
    END IF;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Stand-in structure for view `salesbycategory`
-- (See below for the actual view)
--
CREATE TABLE `salesbycategory` (
`Lipstik` decimal(32,0)
,`Foundation` decimal(32,0)
,`Shampo` decimal(32,0)
,`Conditioner` decimal(32,0)
,`Eyeliner` decimal(32,0)
,`BodyLotion` decimal(32,0)
,`Maskara` decimal(32,0)
,`BlushOn` decimal(32,0)
,`BodyScrub` decimal(32,0)
,`LipBalm` decimal(32,0)
,`Primer` decimal(32,0)
,`HairMask` decimal(32,0)
,`Serum` decimal(32,0)
,`Concealer` decimal(32,0)
,`HandCream` decimal(32,0)
,`LipTint` decimal(32,0)
,`Eyeshadow` decimal(32,0)
,`BodyWash` decimal(32,0)
,`SettingSpray` decimal(32,0)
,`Highlighter` decimal(32,0)
);

-- --------------------------------------------------------

--
-- Stand-in structure for view `verticalquantitybybrandandcategory`
-- (See below for the actual view)
--
CREATE TABLE `verticalquantitybybrandandcategory` (
`Merek Produk` varchar(50)
,`Kategori Barang` varchar(50)
,`Total Quantity` decimal(32,0)
);

-- --------------------------------------------------------

--
-- Structure for view `mid_range_high_price_products_cascaded`
--
DROP TABLE IF EXISTS `mid_range_high_price_products_cascaded`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `mid_range_high_price_products_cascaded`  AS SELECT `produk_toko_kecantikan`.`ID` AS `ID`, `produk_toko_kecantikan`.`Jenis_Barang` AS `Jenis_Barang`, `produk_toko_kecantikan`.`Kategori_Barang` AS `Kategori_Barang`, `produk_toko_kecantikan`.`Merek_Produk` AS `Merek_Produk`, `produk_toko_kecantikan`.`Nama_Barang` AS `Nama_Barang`, `produk_toko_kecantikan`.`Harga_Barang` AS `Harga_Barang` FROM `produk_toko_kecantikan` WHERE `produk_toko_kecantikan`.`Harga_Barang` < 70000.00WITH CASCADEDCHECK OPTION  ;

-- --------------------------------------------------------

--
-- Structure for view `salesbycategory`
--
DROP TABLE IF EXISTS `salesbycategory`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `salesbycategory`  AS SELECT sum(case when `dp`.`Kategori_Barang` = 'Lipstik' then `ddt`.`JumlahBarang` else 0 end) AS `Lipstik`, sum(case when `dp`.`Kategori_Barang` = 'Foundation' then `ddt`.`JumlahBarang` else 0 end) AS `Foundation`, sum(case when `dp`.`Kategori_Barang` = 'Shampo' then `ddt`.`JumlahBarang` else 0 end) AS `Shampo`, sum(case when `dp`.`Kategori_Barang` = 'Conditioner' then `ddt`.`JumlahBarang` else 0 end) AS `Conditioner`, sum(case when `dp`.`Kategori_Barang` = 'Eyeliner' then `ddt`.`JumlahBarang` else 0 end) AS `Eyeliner`, sum(case when `dp`.`Kategori_Barang` = 'Body Lotion' then `ddt`.`JumlahBarang` else 0 end) AS `BodyLotion`, sum(case when `dp`.`Kategori_Barang` = 'Maskara' then `ddt`.`JumlahBarang` else 0 end) AS `Maskara`, sum(case when `dp`.`Kategori_Barang` = 'Blush On' then `ddt`.`JumlahBarang` else 0 end) AS `BlushOn`, sum(case when `dp`.`Kategori_Barang` = 'Body Scrub' then `ddt`.`JumlahBarang` else 0 end) AS `BodyScrub`, sum(case when `dp`.`Kategori_Barang` = 'Lip Balm' then `ddt`.`JumlahBarang` else 0 end) AS `LipBalm`, sum(case when `dp`.`Kategori_Barang` = 'Primer' then `ddt`.`JumlahBarang` else 0 end) AS `Primer`, sum(case when `dp`.`Kategori_Barang` = 'Hair Mask' then `ddt`.`JumlahBarang` else 0 end) AS `HairMask`, sum(case when `dp`.`Kategori_Barang` = 'Serum' then `ddt`.`JumlahBarang` else 0 end) AS `Serum`, sum(case when `dp`.`Kategori_Barang` = 'Concealer' then `ddt`.`JumlahBarang` else 0 end) AS `Concealer`, sum(case when `dp`.`Kategori_Barang` = 'Hand Cream' then `ddt`.`JumlahBarang` else 0 end) AS `HandCream`, sum(case when `dp`.`Kategori_Barang` = 'Lip Tint' then `ddt`.`JumlahBarang` else 0 end) AS `LipTint`, sum(case when `dp`.`Kategori_Barang` = 'Eyeshadow' then `ddt`.`JumlahBarang` else 0 end) AS `Eyeshadow`, sum(case when `dp`.`Kategori_Barang` = 'Body Wash' then `ddt`.`JumlahBarang` else 0 end) AS `BodyWash`, sum(case when `dp`.`Kategori_Barang` = 'Setting Spray' then `ddt`.`JumlahBarang` else 0 end) AS `SettingSpray`, sum(case when `dp`.`Kategori_Barang` = 'Highlighter' then `ddt`.`JumlahBarang` else 0 end) AS `Highlighter` FROM (`datadetailtransaksi` `ddt` join `produk_toko_kecantikan` `dp` on(`ddt`.`IDBarang` = `dp`.`ID`)) ;

-- --------------------------------------------------------

--
-- Structure for view `verticalquantitybybrandandcategory`
--
DROP TABLE IF EXISTS `verticalquantitybybrandandcategory`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `verticalquantitybybrandandcategory`  AS SELECT `dp`.`Merek_Produk` AS `Merek Produk`, `dp`.`Kategori_Barang` AS `Kategori Barang`, sum(`ddt`.`JumlahBarang`) AS `Total Quantity` FROM (`datadetailtransaksi` `ddt` join `produk_toko_kecantikan` `dp` on(`ddt`.`IDBarang` = `dp`.`ID`)) GROUP BY `dp`.`Merek_Produk`, `dp`.`Kategori_Barang` ;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `datacabang`
--
ALTER TABLE `datacabang`
  ADD PRIMARY KEY (`ID`);

--
-- Indexes for table `datadetailtransaksi`
--
ALTER TABLE `datadetailtransaksi`
  ADD KEY `idx_transaksi_barang` (`IDTransaksi`,`IDBarang`);

--
-- Indexes for table `data_karyawan`
--
ALTER TABLE `data_karyawan`
  ADD PRIMARY KEY (`ID`);

--
-- Indexes for table `data_pelanggan`
--
ALTER TABLE `data_pelanggan`
  ADD PRIMARY KEY (`ID`);

--
-- Indexes for table `data_transaksi`
--
ALTER TABLE `data_transaksi`
  ADD PRIMARY KEY (`ID_Transaksi`);

--
-- Indexes for table `produkpembelian`
--
ALTER TABLE `produkpembelian`
  ADD PRIMARY KEY (`produk_id`,`tanggal_pembelian`);

--
-- Indexes for table `produk_toko_kecantikan`
--
ALTER TABLE `produk_toko_kecantikan`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `idx_kategori_merek` (`Kategori_Barang`,`Merek_Produk`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
